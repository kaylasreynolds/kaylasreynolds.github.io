<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Client Management</title>
  <style>
    :root {
      --grad1:#4c51bf; --grad2:#553c9a;
      --ok:#2f855a;--ok2:#276749;
      --danger:#c53030;--danger2:#97266d;
      --text:#222;--muted:#555;--muted2:#888;
      --card:rgba(255,255,255,.95);--ring:#d6d6d6;
      --shadow:0 10px 30px rgba(0,0,0,.12);
    }
    *{box-sizing:border-box}html,body{height:100%}
    body {
      margin:0;
      font-family:system-ui,-apple-system,"Segoe UI",Inter,Roboto,Ubuntu,sans-serif;
      background:linear-gradient(135deg,#667eea,#764ba2);
      color:var(--text)
    }
    .container{max-width:1200px;margin:auto;padding:20px}
    header {
      background:var(--card);
      backdrop-filter:blur(10px);
      border-radius:20px;
      padding:24px;
      margin-bottom:20px;
      box-shadow:var(--shadow)
    }
    h1 {
      margin:0 0 6px;
      background:linear-gradient(135deg,var(--grad1),var(--grad2));
      -webkit-background-clip:text;
      background-clip:text;
      -webkit-text-fill-color:transparent
    }
    .toolbar {
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      margin-top:10px
    }
    /* Tabs, cards, buttons, etc. (same as previous CSS definitions) */
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>Client Management</h1>
      <div class="toolbar">
        <button id="exportBtn" class="btn ghost">⬇️ Export JSON</button>
        <button id="importBtn" class="btn ghost">⬆️ Import JSON</button>
        <input id="importFile" type="file" accept="application/json" style="display:none">
        <button id="clearBtn" class="btn danger">🗑️ Clear Data</button>
      </div>
    </header>

    <div class="tabs" role="tablist">
      <button class="tab active" data-tab="dashboard">📊 Dashboard</button>
      <button class="tab" data-tab="clients">👥 Clients</button>
      <button class="tab" data-tab="sales">💰 Sales</button>
      <button class="tab" data-tab="tasks">📅 Tasks</button>
    </div>
<!-- Dashboard -->
<div id="dashboard" class="tab-content">
  <div class="stats-grid">
    <div class="card"><div class="stat-number" id="totalClients">0</div><div class="muted">Total Clients</div></div>
    <div class="card"><div class="stat-number" id="activeThisMonth">0</div><div class="muted">Active This Month</div></div>
    <div class="card"><div class="stat-number" id="totalSales">$0.00</div><div class="muted">Total Sales</div></div>
  </div>
</div>

<!-- Clients, Sales, Tasks tabs follow same as previous structure -->
<!-- Be sure to include modal HTML for client, sale, todo -->
<!-- Client Modal -->
<div id="clientModal" class="modal">
  <div class="panel">
    <header><h3 id="clientModalTitle">Add New Client</h3><button class="x" data-close-modal>×</button></header>
    <form id="clientForm">
      <div class="row-cols">
        <div><label>First Name *</label><input type="text" id="clientFirstName" required></div>
        <div><label>Last Name *</label><input type="text" id="clientLastName" required></div>
      </div>
      <div class="row-cols">
        <div><label>Email</label><input type="email" id="clientEmail"></div>
        <div><label>Phone</label><input type="tel" id="clientPhone"></div>
      </div>
      <div><label>Notes</label><textarea id="clientNotes" placeholder="Notes..."></textarea></div>
      <div style="display:flex;justify-content:flex-end;gap:10px">
        <button type="button" class="btn ghost" data-close-modal>Cancel</button>
        <button type="submit" class="btn primary">Save Client</button>
      </div>
    </form>
  </div>
</div>
<!-- Add similar modals for sale and todo -->
<script>
document.addEventListener('DOMContentLoaded', () => {
  const $ = (s, r=document) => r.querySelector(s);
  const $$ = (s, r=document) => [...r.querySelectorAll(s)];
  let clients = [];

  // Load data
  function loadData() {
    try {
      clients = JSON.parse(localStorage.getItem('crm_clients') || '[]');
    } catch {
      clients = [];
    }
  }

  // Save data
  function saveData() {
    localStorage.setItem('crm_clients', JSON.stringify(clients));
  }

  // Add client
  $('#clientForm').addEventListener('submit', e => {
    e.preventDefault();
    const data = {
      id: Date.now().toString(),
      firstName: $('#clientFirstName').value.trim(),
      lastName: $('#clientLastName').value.trim(),
      email: $('#clientEmail').value.trim(),
      phone: $('#clientPhone').value.trim(),
      notes: $('#clientNotes').value.trim(),
      createdAt: new Date().toISOString()
    };
    clients.push(data);
    saveData();
    $('#clientModal').classList.remove('active');
    alert('Client saved!');
  });

  // Modal open/close
  $('#openClientBtn')?.addEventListener('click', () => $('#clientModal').classList.add('active'));
  $$('.x, [data-close-modal]').forEach(btn => btn.addEventListener('click', () => $('#clientModal').classList.remove('active')));

  // Tab switch
  $$('.tab').forEach(tab => {
    tab.addEventListener('click', () => {
      const name = tab.dataset.tab;
      $$('.tab-content').forEach(c => c.style.display = (c.id === name ? 'block' : 'none'));
      $$('.tab').forEach(t => t.classList.remove('active'));
      tab.classList.add('active');
    });
  });

  loadData();
});
</script>
</body>
</html>
